%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=49336sp\relax

\usepackage[margin=1in,marginparwidth=0.5in]{geometry}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}

\usepackage{multirow}
\usepackage{eqparbox}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Contents:}}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.\@ }}
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing }}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}



\title{CritOpS Documentation}
\date{Apr 12, 2017}
\release{2.0.0}
\author{Andrew Johnson}
\newcommand{\sphinxlogo}{}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}



\chapter{Intro}
\label{\detokenize{intro:intro}}\label{\detokenize{intro:welcome-to-critops-s-documentation}}\label{\detokenize{intro::doc}}
This is the documentation for \sphinxstyleemphasis{CritOpS}, a Critical Optimization Search tool for use with \sphinxtitleref{NEWT{}`{[}1{]}.
*CritOpS* is designed to iteratively modify inputs for {}`NEWT} to obtain a desired eigenvalue.
More documentation will be added before the final release of this code, including examples and validation testing.


\section{Usage}
\label{\detokenize{intro:usage}}
\sphinxstyleemphasis{CritOpS} can be run from the terminal while in the directory outside the \sphinxtitleref{critops} folder with the command

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} python critops \PYGZlt{}mainfile\PYGZgt{} \PYGZlt{}paramfile\PYGZgt{}
\end{sphinxVerbatim}

Where \sphinxtitleref{\textless{}mainfile\textgreater{}} is a valid \sphinxtitleref{NEWT} input file with some variables in place of valid values and \sphinxtitleref{\textless{}paramfile\textgreater{}} is the
file that contains limits on iteration parameters, desired k-eff, and indicates the variable to be iterated upon.
See \sphinxcode{testing/iter\_tester.inp} and \sphinxcode{testing/param\_tester.txt} for one example case.


\section{References}
\label{\detokenize{intro:references}}
{[}1{]}: M. D. DeHart, and S. Bowman, ``Reactor Physics Methods and Analysis Capabilities in SCALE,'' Nuclear Technology, Technical Paper vol. 174, no.2, pp. 196-213, 2011.


\chapter{iterator}
\label{\detokenize{iterator:iterator}}\label{\detokenize{iterator:module-critops.iterator}}\label{\detokenize{iterator::doc}}\index{critops.iterator (module)}
NRE6401 - Molten Salt Reactor

CritOpS
\begin{enumerate}
\item {} 
Johnson

\end{enumerate}

Objective: Main file for controlling the iteration scheme

Functions:
\begin{quote}

iter\_main: Landing function that drives the iteration

makefile: Write the new output file using the value from iteration \_iter

update\_itervar: Simple function to update the iteration variables.

parse\_scale\_out\_eig: Read through the SCALE output file specified by \_ofile and return status and eigenvalue (if present)
\end{quote}
\index{itermain() (in module critops.iterator)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{iterator:critops.iterator.itermain}}\pysiglinewithargsret{\sphinxcode{critops.iterator.}\sphinxbfcode{itermain}}{\emph{tmp\_list: (\textless{}class `list'\textgreater{}}, \emph{\textless{}class `tuple'\textgreater{})}, \emph{file\_name: str}, \emph{iter\_vars: dict}, \emph{kwargs: dict}}{}
Main function for controlling the iteration
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleliteralstrong{tmp\_list} -- List of lines from template file

\item {} 
\sphinxstyleliteralstrong{file\_name} -- Name of template file

\item {} 
\sphinxstyleliteralstrong{iter\_vars} -- Dictionary of iteration variables and their starting, minima, and maximum values

\item {} 
\sphinxstyleliteralstrong{kwargs} -- Additional keyword arguments

\end{itemize}

\item[{Returns}] \leavevmode
k\_vec: List of progression of eigenvalue through iteration procedure

\item[{Returns}] \leavevmode
iter\_vecs: Dictionary of iteration and their values through iteration procedure

\item[{Returns}] \leavevmode

conv\_type - reason for exiting iter\_main

0: Accurately converged to target eigenvalue in specified iterations

1: iter\_var exceeded specified maximum twice

-1: iter\_var exceeded specified minimum twice

2: Reached iteration limit without reaching target eigenvalue

-2: Previous two k are close to similar


\end{description}\end{quote}

\end{fulllineitems}

\index{update\_itervar() (in module critops.iterator)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{iterator:critops.iterator.update_itervar}}\pysiglinewithargsret{\sphinxcode{critops.iterator.}\sphinxbfcode{update\_itervar}}{\emph{iter\_vars: dict}, \emph{iter\_vec: dict}, \emph{kvec: (\textless{}class `list'\textgreater{}}, \emph{\textless{}class `tuple'\textgreater{})}, \emph{ktarg: float}}{}
Simple function to update the iteration variables.
Currently set up for a positive feedback on the variables.
I.e. increasing each iteration variable will increase k
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleliteralstrong{iter\_vars} -- Dictionary of iteration variables and their minima/maxima

\item {} 
\sphinxstyleliteralstrong{iter\_vec} -- Dictionary of iteration variables and their values through the iteratio procedure

\item {} 
\sphinxstyleliteralstrong{kvec} -- Vector of eigenvalues

\item {} 
\sphinxstyleliteralstrong{ktarg} -- Target eigenvalue

\end{itemize}

\item[{Returns}] \leavevmode
status
status = 0 if the updated value is inside the intended range
status = 1 if the desired updated value is greater than the specified maximum of the parameter
and the max value is used as the updated value
status = -1 if the desired updated value is less than the specified maximum of the parameter
and the minimum value is used as the updated value

\end{description}\end{quote}

\end{fulllineitems}

\index{parse\_scale\_out\_eig() (in module critops.iterator)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{iterator:critops.iterator.parse_scale_out_eig}}\pysiglinewithargsret{\sphinxcode{critops.iterator.}\sphinxbfcode{parse\_scale\_out\_eig}}{\emph{\_ofile: str}, \emph{**kwargs}}{}
Read through the SCALE output file specified by \_ofile and return status and eigenvalue (if present)
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\sphinxstyleliteralstrong{\_ofile} -- SCALE .out file

\item[{Returns}] \leavevmode

Status, eigenvalue

status = True if output file exists and eigenvalue was extracted
status = False if output file exists but no eigenvalue was found (possible error in input file syntax)
exit operation if no output file found


\end{description}\end{quote}

\end{fulllineitems}



\chapter{readinputs}
\label{\detokenize{readinputs:readinputs}}\label{\detokenize{readinputs:module-critops.readinputs}}\label{\detokenize{readinputs::doc}}\index{critops.readinputs (module)}
NRE6401 - Molten Salt Reactor

CritOps

Objective: Read the inputs, update global variables, and check for proper variable usage

Functions:
\begin{quote}

check\_inputs: make sure values in global\_parameters are good for running
read\_param: Read the parameter file and update values in globalparams
readmain: Main driver for reading and processing the input files
\end{quote}
\index{readmain() (in module critops.readinputs)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{readinputs:critops.readinputs.readmain}}\pysiglinewithargsret{\sphinxcode{critops.readinputs.}\sphinxbfcode{readmain}}{\emph{tmp\_file}, \emph{param\_file}, \emph{kwargs: dict}}{}
Main driver for reading and processing input files.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleliteralstrong{tmp\_file} -- Template input file

\item {} 
\sphinxstyleliteralstrong{param\_file} -- Parameter file

\item {} 
\sphinxstyleliteralstrong{kwargs} -- Additional arguments
- verbose (True) - status updates
- output (None) - print to screen
- Plus additional iteration parameters

\end{itemize}

\item[{Returns}] \leavevmode
List of valid template file lines and dictionary of interation variables
Updates kwargs based on values in param\_file

\end{description}\end{quote}

\end{fulllineitems}

\index{read\_param() (in module critops.readinputs)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{readinputs:critops.readinputs.read_param}}\pysiglinewithargsret{\sphinxcode{critops.readinputs.}\sphinxbfcode{read\_param}}{\emph{\_pfile}, \emph{**kwargs}}{}
Read the parameter file and update values in kwargs
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\sphinxstyleliteralstrong{\_pfile} -- Parameter file

\item[{Returns}] \leavevmode
iter\_vars: Dictionary of iteration variables and their starting, minima, and maximum values

\end{description}\end{quote}

\end{fulllineitems}

\index{check\_inputs() (in module critops.readinputs)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{readinputs:critops.readinputs.check_inputs}}\pysiglinewithargsret{\sphinxcode{critops.readinputs.}\sphinxbfcode{check\_inputs}}{\emph{temp\_lines: list}, \emph{iter\_vars: dict}, \emph{**kwargs}}{}
Run over the inputs and make sure things are good for operation

\end{fulllineitems}



\chapter{outputs}
\label{\detokenize{outputs:module-critops.outputs}}\label{\detokenize{outputs:outputs}}\label{\detokenize{outputs::doc}}\index{critops.outputs (module)}
NRE6401 - Molten Salt Reactor

CritOpS

Objective: Functions for reading SCALE output files and writing output files

Functions:
\begin{quote}

parse\_scale\_output: Parse through the SCALE output file and return status
\end{quote}
\index{output\_landing() (in module critops.outputs)}

\begin{fulllineitems}
\phantomsection\label{\detokenize{outputs:critops.outputs.output_landing}}\pysiglinewithargsret{\sphinxcode{critops.outputs.}\sphinxbfcode{output\_landing}}{\emph{iter\_vecs: dict}, \emph{k\_vec: (\textless{}class `list'\textgreater{}}, \emph{\textless{}class `tuple'\textgreater{})}, \emph{\_outtype: int}, \emph{**kwargs}}{}
Write the output file according to the type of output
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxstyleliteralstrong{iter\_vecs} -- Dictionary with iteration variables and their values through the procedure

\item {} 
\sphinxstyleliteralstrong{k\_vec} -- Vector of eigenvalues

\item {} 
\sphinxstyleliteralstrong{\_outtype} -- Flag indicating the reason the program terminated
- 0 Nothing went wrong
- 1 Desired update value for iteration parameter twice exceeded the maximum value from the parameter file
- -1 Desired update value for iteration parameter twice exceeded the minimum value from the parameter file
- 2 Exceeded the total number of iterations allotted
- -2 No excessive change in eigenvalue

\end{itemize}

\item[{Returns}] \leavevmode


\end{description}\end{quote}

\end{fulllineitems}



\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{sphinxtheindex}
\def\bigletter#1{{\Large\sffamily#1}\nopagebreak\vspace{1mm}}
\bigletter{c}
\item {\sphinxstyleindexentry{critops.iterator}}\sphinxstyleindexpageref{iterator:\detokenize{module-critops.iterator}}
\item {\sphinxstyleindexentry{critops.outputs}}\sphinxstyleindexpageref{outputs:\detokenize{module-critops.outputs}}
\item {\sphinxstyleindexentry{critops.readinputs}}\sphinxstyleindexpageref{readinputs:\detokenize{module-critops.readinputs}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}